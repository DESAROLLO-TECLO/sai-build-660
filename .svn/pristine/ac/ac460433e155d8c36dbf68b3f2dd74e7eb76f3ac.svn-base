<html>
<head>
<meta charset="utf-8">
<title>Pago de Infracción </title>
</head>
<body>
	<section class="content-header">
		<h1>Pago de Infracción</h1>
		<ol class="breadcrumb">
			<li><a><i class="fa fa-paypal"></i> Pagos</a></li>
			<li class="active">Infracción</li>
		</ol>
	</section>



	<!-- Main content -->
	<section class="content" ng-init="init()">
		<div class="row">
			<applet
				
				archive="applets/appcp_v100.jar"
				code="{{codebase}}" id="App" width="0" height="0"> </applet>
				<!-- 				archive="{{applet_route}}/applets/appcp_v100.jar" -->

			<!-- 			<p> -->
			<!-- 				<object type="application/x-java-applet" classid="java:application.App.class" -->
			<!-- 					archive="http://localhost:9080/saicdmx-api/applets/appcp_v100.jar" width="7" height="4 "></object> -->
			<!-- 			</p> -->
		</div>

		<!-- /.row -->
		<div class="row col-md-8 col-md-offset-2" ng-if="isCajero == false">

			<div class="alert alert-teclo alert-dismissable center">
				<strong class="mensajeAutorizacion">¡Cuidado! No puedes realizar esta operación,
				verifica tu perfil.</strong>
			</div>

		</div>

		<div class="row col-md-8 col-md-offset-2"
			ng-if="navegador =='chrome' || navegador =='ms-edge'">

			<div class="alert alert-teclo alert-dismissable center">
				<strong class="mensajeAutorizacion">¡Cuidado! El módulo pago requiere de navegador
				Firefox o Internet Explorer.</strong>
			</div>

		</div>
		<div
			ng-show="isCajero == true && (navegador !='chrome' && navegador !='ms-edge')">

			<div class="row">

				<div class="col-md-3 "></div>
				<div class="col-md-6 ">
					<!-- Datos Del Infractor -->
					<div class="box box-danger">
						<div class="box-header with-border text-center">
<!-- 							<h3 class="box-title">Búsqueda de Infracciones para Pago</h3> -->
							<h3 class="box-title">Búsqueda</h3>
						</div>
						<!-- /.box-header -->
						<div class="box-body">

							<div class="row">
								<form role="form" name="infraccionesDeposito">

									<div class="col-md-6">
										<div class="form-group">
											<div class="input-group">
												<span class="input-group-addon"><i class="fa fa-map"></i></span>

												<select class="form-control"
													ng-options="tipoBusqueda.codigoString as tipoBusqueda.descripcion for tipoBusqueda in catTiposBusqueda"
													ng-model="infraccionDepositoVO.tipoParametro"
													name="tipoBusqueda">
												</select>
											</div>

											<!-- /.form-group -->
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group"
											ng-class="{'has-error': (infraccionesDeposito.infraccionDepositoCampo.$error.required && infraccionesDeposito.infraccionDepositoCampo.$dirty) }">
											<div class="input-group">
												<span class="input-group-addon"><i
													class="fa  fa-credit-card"></i></span> <input type="text"
													capitalize class="form-control"
													id="infraccionDepositoCampo"
													ng-model="infraccionDepositoVO.valorParametro"
													required="true" name="infraccionDepositoCampo"
													ng-keyup="$event.keyCode == 13 ? consultardesdeImput() : null"> <span
													class="input-group-btn">
													<button type="button" class="btn btn-danger btn-flat center-block"
														id="btnBuscarInfraccion"
														ng-click="consultaInfraccionesDeposito(  infraccionDepositoVO )">Buscar</button>
												</span>

											</div>
											<div
												ng-show="infraccionesDeposito.infraccionDepositoCampo.$error.required && infraccionesDeposito.infraccionDepositoCampo.$dirty "
												ng-style="{color:'red'}">El valor es requerido</div>
										</div>
									</div>
									<div class="row">
										<div class="form-group">
											<div class="col-xs-5"></div>
											<div class="col-xs-2"></div>
										</div>
									</div>
								</form>

							</div>


						</div>
						<!-- /.row -->
					</div>
				</div>
			</div>
			</br>

			<div class="row" id="listaInfracciones"
				ng-if="listaInfracciones.length > 0">

				<div class="col-md-12">

					<div class="box box-danger">
						<div class="box-header row">
							<div class="col-md-3 col-xs-12">
								<h3 class="box-title  text-center">Registros
									encontrados: {{ (listaInfracciones | filter: view.filterSearch).length }}</h3>
							</div>
							<div class="col-md-3 center col-xs-12">
							<h3 class="box-title  text-center">
									Total a pagar: {{ totalSumaC | currency }}</h3>
							</div>
							<div class="col-md-6 form-group">
								<div class="row">
									<div class="col-md-offset-4 col-md-7 col-xs-8">
										<div class="input-group ">
											<input id="searchsomething" type="text" class="form-control" placeholder="Buscar por filtro" ng-model="view.filterSearch">
											<span class="input-group-addon"><i class="fa fa-search"></i></span>
										</div>
									</div>
<!-- 									<div class="col-md-1 col-xs-1"> -->
<!-- 										<a href="#/cargaExpediente/{{idInfraccionDeposito}}/1" class="pull-right" ng-if="idInfraccionDeposito !=null"> <img src="static/dist/img/folder.png" width="40px" height="37px"></a> -->
<!-- 									</div> -->
								</div>
							</div>
						</div>
							<div class="box-header row" ng-if="bannerMsgRobo != ''">
							<div class="col-md-12 center col-xs-12">
								<h6 ng-style="{color:'red'}" class="box-title  text-center">
								{{bannerMsgRobo}}
								</h6>
							</div>
						</div>

						<div class="box-body table-responsive">
							<div style="display: block; overflow: auto;">
								<table id="tabla_infracciones" class="table table-striped table-hover">
									<thead>
										<tr>
											<th sort order="'classeStatus'"     by="order" reverse="reverse">ESTATUS</th>
											<th sort order="'infracNum'"        by="order" reverse="reverse">INFRACCIÓN /No. DCTO</th>
											<th sort order="'infracPlaca'"      by="order" reverse="reverse">PLACA</th>
<!-- 											<th sort order="'infracNumCtrl'"    by="order" reverse="reverse">NCI</th> -->
											<th sort order="'infracFechaOrder'"      by="order" reverse="reverse">FECHA</th>
											<th sort order="'infracMotivacion'" by="order" reverse="reverse">MOTIVO</th>
											<th sort order="'infracSancion'"    by="order" reverse="reverse">SANCIÓN</th>											
											<th sort order="'infracMontoOrder'" 			by="order" reverse="reverse">MONTO</th>
											<th sort order="'infracDescuentoOrder'"  by="order" reverse="reverse">REDUCCIÓN</th>
											<th sort order="'infracActualizacionOrder'" by="order" reverse="reverse">ACTUALIZACIÓN</th>
											<th sort order="'infracRecargoOrder'" by="order" reverse="reverse">RECARGOS</th>
											<th sort order="'infracDerechoPisoOrder'" by="order" reverse="reverse">DERECHO DE PISO</th>
											<th sort order="'infracArrastreOrder'" by="order" reverse="reverse">ARRASTRE</th>
											<th sort order="'infracCandadoOrder'" by="order" reverse="reverse">CANDADO</th>
											<th sort order="'infracTotalPagarOrder'" by="order" reverse="reverse">TOTAL</th>
											<th >RECIBO</th>										</tr>
									</thead>
									<tbody class="text-center">
										<tr dir-paginate="infraccionVO in listaInfracciones | orderBy:order:reverse |  filter: view.filterSearch | itemsPerPage: view.rowsPerPage">
											<td><span ng-class="infraccionVO.classeStatus">{{infraccionVO.statusOrden}}</span></td>
											<td>
												<a href='javascript:void(0)' ng-if="!infraccionVO.estatusUrl && infraccionVO.statusOrden != 'Pagado'"
													ng-click="seleccionarInfraccionPago(infraccionVO)"><span
													ng-class="infraccionVO.classeNoInfraccion"
													data-toggle="modal" data-target="#modalTipoPago">{{infraccionVO.infracNum}}</span>
												</a>

												<a href='javascript:void(0)' ng-class="infraccionVO.classeNoInfraccion" ng-if="infraccionVO.estatusUrl && infraccionVO.statusOrden != 'Pagado'" ng-click="validaInfraccion(infraccionVO.infracTotalPagar,infraccionVO.classeNoInfraccion)">
													{{infraccionVO.infracNum}}
												</a>
												<span href='javascript:void(0)' ng-class="infraccionVO.classeNoInfraccion" ng-if="infraccionVO.estatusUrl && infraccionVO.statusOrden == 'Pagado'">
													{{infraccionVO.infracNum}}
												</span>
												<span ng-class="infraccionVO.classeNoInfraccion" ng-if="!infraccionVO.estatusUrl && infraccionVO.statusOrden == 'Pagado'">
													{{infraccionVO.infracNum}}
												</span>
											</td>
											<td>{{infraccionVO.infracPlaca}}</td>
<!-- 											<td>{{infraccionVO.infracNumCtrl}}</td> -->
											<td>{{infraccionVO.infracFecha}}</td>
											<td>{{infraccionVO.infracMotivacion}}</td>
											<td>{{infraccionVO.infracSancion}}</td>
											<td>{{infraccionVO.infracMonto | currency }}</td>
											<td>{{infraccionVO.infracDescuento | currency }}</td>
											<td>{{infraccionVO.infracActualizacion | currency }}</td>
											<td>{{infraccionVO.infracRecargo | currency }}</td>
											<td>{{infraccionVO.infracDerechoPiso | currency }}</td>
											<td>{{infraccionVO.infracArrastre | currency }}</td>
											<td>{{infraccionVO.infracCandado | currency }}</td>
											<td>{{infraccionVO.infracTotalPagar | currency }}</td>
											<td><a ng-if="infraccionVO.pagoConMonto" role="button" class="btn btn-default btn-sm"
													ng-click="descargaVaucher(infraccionVO.infracNum ,'reporteRecibo')">
													<i class="fa fa-download" aria-hidden="true"></i>
											</a></td>
											<td><a ng-if="infraccionVO.pagoConVoucher"  role="button" class="btn btn-default btn-sm"
												ng-click="descargaVaucher(infraccionVO.infracNum ,'reporteVoucher')">
													<i class="fa fa-download" aria-hidden="true"></i>
												 </a></td>



										</tr>
										<tr ng-if="(listaInfracciones | filter:view.filterSearch).length < 1"><td colspan="17" class="text-center"><h4>No se encontraron coincidencias</h4></td></tr>
									</tbody>
								</table>
							</div>
						</div>
						
						<div class="container-fluid">
							<div class="fixed-table-pagination" style="display:block;">
								<rows-per-page rows="view.rowsPerPage" filtro="view.filterSearch" array="listaInfracciones"></rows-per-page>
								
								<div class="pull-right pagination">
									<dir-pagination-controls class="pagination"></dir-pagination-controls>
								</div>
							</div>
						</div>
						
						<div class="row" ng-if="botonLiberacion">
							<div class="col-xs-12 text-center">
								<a ng-click="liberacionVehiculo()" class="btn btn-danger" role="button">Liberar</a>
							</div>
						</div>
						<br>
					</div>
				</div>
			</div>
		</div>
		<!-- Modal -->
		<form role="form" name="formModal" novalidate >
			<div class="modal fade" id="modalTipoPago" role="dialog"
				style="overflow-y: auto;" ng-if="success.resultado != 1"
				data-keyboard="false" data-backdrop="static">
				<div class="modal-dialog modal-lg">


					<!-- Modal content-->
					<div class="modal-content"
						style="width: 85%; min-width: 280px; margin: auto;">

						<div class="modal-header bg-red-active">
							<button type="button" class="close" data-dismiss="modal" ng-click="reset()">&times;</button>
							<h3 class="modal-title">Formas de Pago</h3>
						</div>
						
<!-- 						<div class="modal-header bg-red-active"> -->
<!-- 							<div class="box-header text-center" style="color: white;"> -->
<!-- 								<button type="button" class="close" data-dismiss="modal" -->
<!-- 									ng-click="reset()" style="color: blue;">&times;</button> -->
<!-- 								<h3 class="modal-title">Formas de Pago</h3> -->

<!-- 							</div> -->
<!-- 						</div> -->

						<div class="modal-body">

							<div class="row">
								<div class="col-xs-12">

									<div class="box box-danger">

										<div class="box-header with-border">
											<i class="fa fa-edit"></i>
											<h3 class="box-title">Pago de Infracción</h3>
											<div class="box-tools pull-right">
												<button type="button" class="btn btn-box-tool"
													data-widget="collapse">
													<i class="fa fa-minus"></i>
												</button>
											</div>
										</div>
										<!-- /.box-header -->
										<div class="box-body">
											<div class="form-group">
												<div ng-show="pagoEnLineaMonto>0" class="row">
													<div class="col-md-12 col-xs-12 center">
													  <label class="label label-success" style="margin: 10px 0;display: inline-block;">Esta infracción cuenta con un pago en línea: {{pagoEnLineaMonto | currency}}</label>
													</div>
												</div>					
												<div class="row">
													<div class="col-md-6 col-xs-6 center">
														<label for="example1">Monto a Pagar: </label>
													</div>
													<div class="col-md-6 col-xs-6 center">
														<label for="example2">{{infraccionParaPagoVO.infracTotalPagar
															| currency }}</label>
													</div>
												</div>
												<div class="row">
													<div class="col-md-6 col-xs-6 center">
														<label for="example1">Número de Infracción: </label>
													</div>
													<div class="col-md-6 col-xs-6 center">
														<label for="example2">{{infraccionParaPagoVO.infracNum}}</label>
													</div>
												</div>
												<br>
												<div class="row" ng-show='success.resultado != 1'>
													<div class="col-md-6 col-xs-6">
														<label for="example1">Tipo de Pago: </label>
													</div>
													<div class="col-md-6 col-xs-6 " ng-show='success.resultado != 1'>

														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-tasks"></i></span> <select
																class="form-control"
																ng-options="tipoPago.codigoString as tipoPago.descripcion for tipoPago in catTiposPago"
																ng-model="infraccionParaPagoVO.formaPago "
																name="formaPago" ng-change="reiniciarPagoDocumentos(infraccionParaPagoVO)">
																<option value="" selected="selected">Seleccione</option>
															</select>
														</div>
													</div>
												</div>


											</div>
										</div>
										<!-- /.box-body -->
									</div>
								</div>
							</div>
							<div class="row" id="formEfectivo"
								ng-if="infraccionParaPagoVO.formaPago == 'EFECTIVO'">
								<div class="col-xs-12">
									<div class="box box-danger">
										<div class="box-header with-border">
											<i class="fa fa-edit"></i>
											<h3 class="box-title">Pago en Efectivo</h3>
										</div>
										<!-- /.box-header -->
										<div class="box-body">
											<div class="form-group">
												<div class="row">
													<div class="col-md-6 col-xs-12 form-group">
														<label for="example1">Monto de Infracción: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-usd"></i></span> <input type="text"
																class="form-control" id="example1" disabled="disabled"
																value="{{infraccionParaPagoVO.infracMonto}}">

														</div>
													</div>
													<div class="col-md-6 col-xs-12 form-group">
														<label for="example2">Descuento:</label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-minus-sign"></i></span> <input
																type="text" class="form-control" id="example2"
																disabled="disabled"
																value="{{infraccionParaPagoVO.infracDescuento}}">
														</div>
													</div>
												</div>
												<div class="row">
													<div class="col-md-6 col-xs-12 form-group">
														<label for="example3">Actualización: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-refresh"></i></span> <input
																type="text" class="form-control" id="example3"
																disabled="disabled"
																value="{{infraccionParaPagoVO.infracActualizacion}}">
														</div>
													</div>
													<div class="col-md-6 col-xs-12 form-group">
														<label for="example4">Recargos: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-plus"></i></span> <input type="text"
																class="form-control" id="example4" disabled="disabled"
																value="{{infraccionParaPagoVO.infracRecargo}}">
														</div>
													</div>
												</div>
												<div class="row">
													<div class="col-md-6 col-xs-12 form-group" >
														<label for="example5">Arrastre: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="fa  fa-train"></i></span> <input type="text"
																class="form-control" id="example5" disabled="disabled"
																value="{{infraccionParaPagoVO.infracArrastre}}">
														</div>
													</div>
													<div class="col-md-6 col-xs-12 form-group">
														<label for="example6">Derecho de Piso: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="fa fa-bus"></i></span> <input type="text"
																class="form-control" id="example6" disabled="disabled"
																value="{{infraccionParaPagoVO.infracDerechoPiso}}">
														</div>
													</div>
												</div>
												<div class="row">
													<div class="col-md-6 col-xs-12 form-group">
														<label for="example7">Candado: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="fa  fa-train"></i></span> <input type="text"
																class="form-control" id="example7" disabled="disabled"
																value="{{infraccionParaPagoVO.infracCandado}}">
														</div>
													</div>
												
													<div class="col-md-6 col-xs-12 form-group" ng-class="{'has-error': formModal.example7.$invalid && formModal.example7.$dirty || botonPago}">
														<label for="example7">Cantidad Recibida: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="fa  fa-money"></i></span> <input type="text"
																integer-decimal name="example7" ng-required="true" maxlength="20"
																ng-change="calcularCambio(cantidadRecibida,  infraccionParaPagoVO )"
																class="form-control" id="example7"
																ng-model="cantidadRecibida">
														</div>
														<div
															ng-show="formModal.example7.$error.required && formModal.example7.$dirty"
															ng-style="{color:'#dd4b39'}">La cantidad recibida es requerida</div>
														<div
															ng-if="botonPago"
															ng-style="{color:'#dd4b39'}">La cantidad recibida debe ser igual o mayor al total</div>
													</div>
													</div>
													<div class="row">
													<div class="col-md-6 col-xs-12 form-group">
														<label for="example8">Cambio: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="fa  fa-money"></i></span> <input type="text"
																value="{{cambio | currency}}" class="form-control" id="example8"
																disabled="disabled">
															</div>
														<div>
													</div>
												</div>

											
											<div class="row">
												<div class="form-group">
													<div class="col-md-12 col-xs-12 text-center">
														<button class="btn btn-danger" id="btnPagar" 
														ng-click="pagarInfraccion(infraccionParaPagoVO, cantidadRecibida)">Pagar</button>
													</div>
												</div>
											</div>
											</div><br>
										</div>
										<!-- /.box-body -->
									</div>
								</div>
							</div>
						</div>
							<div class="row" id="formDocumento"
								ng-if="infraccionParaPagoVO.formaPago == 'DOCUMENTO'">

								<div class="col-xs-12">
									<div class="box box-danger">

										<div class="box-header with-border">
											<i class="fa fa-edit"></i>
											<h3 class="box-title">Pago con Documento</h3>

										</div>
										<div class="box-body">
											<div class="row" id="mensajeDocumento">
												<div class="col-md-4"></div>
												<div class="col-md-5"></div>
											</div>
											<div class="row" ng-if="infraccionParaPagoVO.infracMonto > 0">
											
												<div class="col-md-4 col-xs-12">
													<div class="form-group">												
														<label class="control-sidebar-subheading"> <input
															type="checkbox" data-layout="layout-boxed"
															ng-click="checkedInfraccion(infraccionParaPagoVO)"
															ng-model="checkModel.infraccion"
															ng-checked="checkedMonto"
															ng-disabled="disabledMonto"
															class="pull-left">Monto : {{montoInfraccion}}
														</label>
													</div>
												</div>
												<div class="col-md-4 col-xs-12">
													<div class="form-group"
														ng-class="{'has-error': (formModal.infracEntidad.$invalid && formModal.infracEntidad.$dirty && checkModel.infraccion) || (documentoVO.infraccionEntidad==1 && checkModel.infraccion)}">
														<label>Entidad Pago: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-tasks"></i></span> <select
																class="form-control"
																ng-options="entidadPago.codigo as entidadPago.descripcion for entidadPago in catTiposEntidadesPago"
																ng-model="documentoVO.infraccionEntidad" 
																ng-required="checkModel.infraccion" name="infracEntidad"
																ng-disabled="!checkModel.infraccion">
																<option value="" selected="selected">Seleccione</option>
															</select>
														</div>
														<div
															ng-show="(formModal.infracEntidad.$error.required && formModal.infracEntidad.$dirty && checkModel.infraccion) || (documentoVO.infraccionEntidad==1 && checkModel.infraccion)"
															ng-style="{color:'#dd4b39'}">La entidad pago es
															requerida</div> 
													</div>
												</div>
												<div class="col-md-1"></div>
												<div class="col-md-4 col-xs-12">
													<div class="form-group"
														ng-class="{'has-error': formModal.infracDocumento.$invalid && formModal.infracDocumento.$dirty && checkModel.infraccion}">
														<label>Documento: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-book"></i></span> <input type="text"
																class="form-control" id="example1"
																ng-required="checkModel.infraccion"
																ng-model="documentoVO.infraccionReferencia"
																ng-disabled="!checkModel.infraccion"
																name="infracDocumento" maxlength="25">
														</div>
														<div
															ng-show="formModal.infracDocumento.$error.required && formModal.infracDocumento.$dirty && checkModel.infraccion"
															ng-style="{color:'#dd4b39'}">El documento es requerido</div>
													</div>
												</div>
											</div>
										 <div class="row">										
<!-- 													<div align="center" class="form-group col-md-4 col-xs-6"> -->
<!--  														<font ng-show="pagoAplicado">{{msjPagoAplicado}}</font> -->
<!-- 														<span class="label label-success" ng-show="pagoEnLineaMonto>=montoInfraccion">Pago en linea aplicado</span> -->
<!-- 														<span class="label label-danger" ng-show="pagoEnLineaMonto<montoInfraccion">Monto Insuficiente: {{montoInfraccion-pagoEnLineaMonto | currency}} </span>													 -->
<!-- 													</div> -->
													<div align="left" class="form-group col-md-4 col-xs-6">
														<label>Monto de infracción: </label>{{infraccionParaPagoVO.infracMonto | currency}}
													</div>
													<div align="left" class="form-group col-md-4 col-xs-6">
														<label>Recargos: </label>{{infraccionParaPagoVO.infracRecargo | currency}}
													</div>
													
													<div align="left" class="form-group col-md-4 col-xs-6">
														<label>Descuento:</label>{{infraccionParaPagoVO.infracDescuento | currency}}
													</div>
													<div align="left" class="form-group col-md-4 col-xs-6">
														<label>Actualización: </label>{{infraccionParaPagoVO.infracActualizacion | currency}}
													</div>
												</div>
											<br>

											<div class="row"
												ng-if="infraccionParaPagoVO.infracArrastre > 0">
												
												<div class="col-md-4 col-xs-12">
													<label> </label>
													<div class="form-group">
														<label class="control-sidebar-subheading"> <input
															type="checkbox" data-layout="layout-boxed"
															ng-click="checkedInfraccion(infraccionParaPagoVO)"
															ng-model="checkModel.arrastre"
															ng-change="cambiarValor(checked)" class="pull-left">Arrastre : {{infraccionParaPagoVO.infracArrastre}}
														</label>
													</div>
												</div>

												<div class="col-md-4 col-xs-12">
													<div class="form-group"
														ng-class="{'has-error': formModal.arrastreEntidad.$invalid && formModal.arrastreEntidad.$dirty && checkModel.arrastre}">
														<label>Entidad Pago: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-tasks"></i></span> <select
																class="form-control"
																ng-options="entidadPago.codigo as entidadPago.descripcion for entidadPago in catTiposEntidadesPago"
																ng-model="documentoVO.arrastreEntidad"
																ng-required="checkModel.arrastre"
																ng-disabled="!checkModel.arrastre"
																name="arrastreEntidad">
																<option value="" selected="selected">Seleccione</option>
															</select>
														</div>
														<div
															ng-show="formModal.arrastreEntidad.$error.required && formModal.arrastreEntidad.$dirty && checkModel.arrastre"
															ng-style="{color:'#dd4b39'}">La entidad pago es
															requerida</div>
													</div>
												</div>
												
												<div class="col-md-4 col-xs-12">
													<div class="form-group"
														ng-class="{'has-error': formModal.arrastreDocumento.$invalid && formModal.arrastreDocumento.$dirty && checkModel.arrastre}">
														<label for="example1">Documento: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-book"></i></span> <input type="text"
																class="form-control" id="example1"
																name="arrastreDocumento"
																ng-disabled="!checkModel.arrastre"
																ng-required="checkModel.arrastre"
																ng-model="documentoVO.arrastreReferencia" maxlength="25">
														</div> 
														<div
															ng-show="formModal.arrastreDocumento.$error.required && formModal.arrastreDocumento.$dirty && checkModel.arrastre"
															ng-style="{color:'#dd4b39'}">El documento es requerido</div>
													</div>
												</div>
											</div>

											<div class="row"
												ng-show="infraccionParaPagoVO.infracDerechoPiso > 0">
												
												<div class="col-md-4 col-xs-12 form-group">
													<label for="example1"> </label>
													<div class="input-group">
														<label class="control-sidebar-subheading"> <input
															type="checkbox" data-layout="layout-boxed"
															ng-click="checkedInfraccion(infraccionParaPagoVO)"
															ng-model="checkModel.piso"
															ng-change="cambiarValor(checked)" class="pull-left">Derecho
															de piso : {{infraccionParaPagoVO.infracDerechoPiso}}
														</label>
													</div>
												</div>
												
												<div class="col-md-4 col-xs-12">
													<div class="form-group"
														ng-class="{'has-error': formModal.pisoEntidad.$invalid && formModal.pisoEntidad.$dirty && checkModel.piso}">
														<label>Entidad Pago: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-tasks"></i></span> <select
																class="form-control" ng-required="checkModel.piso"
																ng-options="entidadPago.codigo as entidadPago.descripcion for entidadPago in catTiposEntidadesPago"
																ng-model="entidadPagoDoumento.id"
																ng-disabled="!checkModel.piso" name="pisoEntidad">
																<option value="" selected="selected">Seleccione</option>
															</select>
														</div>										
														<div
															ng-show="formModal.pisoEntidad.$error.required && formModal.pisoEntidad.$dirty && checkModel.piso"
															ng-style="{color:'#dd4b39'}">La entidad pago es
															requerida</div>
													</div>
												</div>
											
												<div class="col-md-4 col-xs-12">
													<div class="form-group"
														ng-class="{'has-error': formModal.pisoDocumento.$invalid && formModal.pisoDocumento.$dirty && checkModel.piso}">
														<label for="example1">Documento: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-book"></i></span> <input type="text"
																class="form-control" id="example1"
																ng-required="checkModel.piso"
																ng-disabled="!checkModel.piso" name="pisoDocumento"
																ng-model="documentoVO.pisoReferencia" maxlength="25">

														</div>
														<div
															ng-show="formModal.pisoDocumento.$error.required && formModal.pisoDocumento.$dirty && checkModel.piso"
															ng-style="{color:'#dd4b39'}">El documento es requerido</div>

													</div>
												</div>
												<div class="col-md-12"></div>
												


										<div class="col-md-4 col-xs-12">
													<div class="form-group"
														>
														<label for="example1">Ampara: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-book"></i></span> <input type="text"
																class="form-control" id="amparaId" integer-decimal	
 																name="amapraDerechoPiso" 
 																ng-disabled="!checkModel.piso"  
 																maxlength="20"															
																ng-model="amparaPiso" ng-change="calcularMontoPisoAmparadoChanged(amparaPiso,infraccionParaPagoVO.infracDerechoPiso )"
																>

														</div>
														

													</div>
												</div>
												<div class="col-md-8"></div>
											</div>
											<div class="row" ng-if="infraccionParaPagoVO.infracCandado > 0">
													
											<div class="col-md-4 col-xs-12 form-group">
													<label for="example1"> </label>
													<div class="input-group">
														<label class="control-sidebar-subheading"> <input
															type="checkbox" data-layout="layout-boxed"
															ng-click="checkedInfraccion(infraccionParaPagoVO)"
															ng-model="checkModel.candado"
															ng-change="cambiarValor(checked)" class="pull-left">Candado:
															{{infraccionParaPagoVO.infracCandado}}
														</label>
													</div>
												</div>
												
												<div class="col-md-4 col-xs-12">   
													<div class="form-group"      
														ng-class="{'has-error': (documentoVO.candadoEntidad==null || documentoVO.candadoEntidad==0)  && checkModel.candado}">
														<label>Entidad Pago: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-tasks"></i></span> <select
																class="form-control" 
																ng-required="checkModel.candado"
																ng-options="entidadPago.codigo as entidadPago.descripcion for entidadPago in catTiposEntidadesPago"																
																ng-model="documentoVO.candadoEntidad"
																ng-disabled="!checkModel.candado" name="candadoEnt">
																<option value="" selected="selected">Seleccione</option>
															</select>
														</div>
														<div
															ng-show="(documentoVO.candadoEntidad==null || documentoVO.candadoEntidad==0)  && checkModel.candado"
															ng-style="{color:'#dd4b39'}">
															La entidad pago es
															requerida</div>  
													</div>
												</div>								
											
												<div class="col-md-4">
													<div class="form-group"
														ng-class="{'has-error': formModal.candadoDocumento.$invalid && formModal.candadoDocumento.$dirty && checkModel.candado}">

														<label>Documento: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-book"></i></span> <input type="text"
																class="form-control" id="example1"
																ng-required="checkModel.candado"
																ng-disabled="!checkModel.candado"
																name="candadoDocumento"
																ng-model="documentoVO.candadoReferencia" maxlength="25" >

														</div>

														<div
															ng-show="formModal.candadoDocumento.$error.required && formModal.candadoDocumento.$dirty && checkModel.candado"
															ng-style="{color:'#dd4b39'}">El documento es requerido</div>
													</div>
												</div>
											</div>
											</br> </br>
											<div class="row">

												<div class="form-group">
													<div class="col-md-12 text-center">

														<h3 class="box-title">Resto por Pagar:
															{{totalPagoDocumento | currency}}</h3>

													</div>
												</div>
											</div>
											
											<div class="row" ng-show="totalPagoDocumento > 0">
												<div class="form-group"
													ng-class="{'has-error': formModal.formaPagoDocumentos.$invalid && formModal.formaPagoDocumentos.$dirty}">
													<div class="col-md-4"></div>

													<div class="col-md-4 text-center">

														<label for="example1">Tipo de Pago: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-tasks"></i></span> <select
																class="form-control"
																ng-options="tipoPago.codigo as tipoPago.descripcion for tipoPago in catTiposPago | filter:  { codigo: '!99' }"
																ng-model="infraccionParaPagoVO.formaPagoDocumentos"
																ng-change="formaPagoConDocumento(infraccionParaPagoVO)"
																ng-required="true" name="formaPagoDocumentos">
																<option value="" selected="selected">Seleccione</option>
															</select>
														</div>
														<div
															ng-show="formModal.formaPagoDocumentos.$error.required && formModal.formaPagoDocumentos.$dirty"
															ng-style="{color:'#dd4b39'}">El tipo de pago es
															requerido</div>
													</div>
												</div>
											</div>
											</br> </br>
											<div class="row">
												<div class="form-group">
													<div class="col-md-12 text-center">
														<button class="btn btn-danger" id="btnPagar"
															ng-show="funcionBtnPagoDoc == 1" 
															ng-click="pagarInfraccion(infraccionParaPagoVO)">{{labelBtnPagoDoc}}</button>
														<button class="btn btn-danger" id="btnPagar"
															ng-show="funcionBtnPagoDoc == 3 && totalPagoDocumento > 0"
															ng-click="realizarCobroDocumento(infraccionParaPagoVO)">{{labelBtnPagoDoc}}</button>
														<button class="btn btn-danger" id="btnLeerTarjeta"
															ng-show="funcionBtnPagoDoc == 2 && totalPagoDocumento > 0"
															ng-click="pagarInfraccion(infraccionParaPagoVO)">Leer
															Tarjeta</button>


													</div>
												</div>

											</div>
										</div>
										<!-- /.box-body -->
									</div>

								</div>
							</div>

							<div class="row" id="formTarjeta"
								ng-if="infraccionParaPagoVO.formaPago == 'TARJETA'">
								<div class="col-xs-12">
									<div class="box box-danger">
										<div class="box-header with-border">
											<i class="fa fa-edit"></i>
											<h3 class="box-title">Pago con tarjeta</h3>
										</div>
										<div class="box-body">
											<div class="form-group">
												<div class="row">
													<div class="col-md-6 col-xs-12 form-group">
														<label for="example1">Monto de Infracción: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-usd"></i></span> <input type="text"
																class="form-control" id="example1" disabled="disabled"
																value="{{infraccionParaPagoVO.infracMonto}}">
														</div>
													</div>
													<div class="col-md-6 col-xs-12 form-group" >
														<label for="example2">Descuento:</label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-minus-sign"></i></span> <input
																type="text" class="form-control" id="example2"
																disabled="disabled"
																value="{{infraccionParaPagoVO.infracDescuento}}">
														</div>
													</div>
												</div>
												<div class="row">
													<div class="col-md-6 col-xs-12 form-group">
														<label for="example3">Actualización: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-refresh"></i></span> <input
																type="text" class="form-control" id="example3"
																disabled="disabled"
																value="{{infraccionParaPagoVO.infracActualizacion}}">
														</div>
													</div>
													<div class="col-md-6 col-xs-12 form-group">
														<label for="example4">Recargos: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="glyphicon glyphicon-plus"></i></span> <input type="text"
																class="form-control" id="example4" disabled="disabled"
																value="{{infraccionParaPagoVO.infracRecargo}}">
														</div>
													</div>
												</div>
												<div class="row">
													<div class="col-md-6 col-xs-12 form-group">
														<label for="example5">Arrastre: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="fa  fa-train"></i></span> <input type="text"
																class="form-control" id="example5" disabled="disabled"
																value="{{infraccionParaPagoVO.infracArrastre}}">
														</div>
													</div>
													<div class="col-md-6 col-xs-12 form-group">
														<label for="example6">Derecho de Piso: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="fa fa-bus"></i></span> <input type="text"
																class="form-control" id="example6" disabled="disabled"
																value="{{infraccionParaPagoVO.infracDerechoPiso}}">
														</div>
													</div>
												</div>
												<div class="row">
													<div class="col-md-6 col-xs-12 form-group">
														<label for="example7">Candado: </label>
														<div class="input-group">
															<span class="input-group-addon"><i
																class="fa  fa-train"></i></span> <input type="text"
																class="form-control" id="example7" disabled="disabled"
																value="{{infraccionParaPagoVO.infracCandado}}">
														</div>
													</div>
												</div>

											</div>
											<div class="row">
												<div class="form-group">

													<div class="col-md-12 text-center">
														<button class="btn btn-danger" id="btnPagar"
															ng-if="funcionBtnPago == 1"
															ng-click="pagarInfraccion(infraccionParaPagoVO)">{{labelBtnPago}}</button>
														<button class="btn btn-danger" ng-if="funcionBtnPago == 2"
															ng-click="realizarCobro(infraccionParaPagoVO)">{{labelBtnPago}}</button>
													</div>
													<div class="col-md-12 text-center">
														<br>
														<label ng-if="funcionBtnPago == 2" style="{color:red}"><strong>{{labelTarjeta}}</strong></label>
													</div>
												</div>
											</div><br>
											<!-- /.box-body -->
										</div>
									</div>
								</div>
							</div>

							<!-- 							<div class="modal-footer"> -->
							<!-- 								<button type="button" ng-click="reset()" -->
							<!-- 									class="btn bg-red-active" data-dismiss="modal">Salir</button> -->
							<!-- 							</div> -->
						</div>
					</div>
					
	<script type="text/javascript">
		var app=angular.module("siidfApp");
			app.controller("pagosInfraccionController",function(){
			return new cancelaPorTimeOut();
			return new detectaError(mensajeError);
		});
		function detectaError(mensajeError){
			alert(mensajeError);
		}
		function cancelaPorTimeOut(){
			this.timeOutParaPagar();
		}
	</script>
				</div>
			</div>
		</form>

	</section>
  

</body>
</html>
