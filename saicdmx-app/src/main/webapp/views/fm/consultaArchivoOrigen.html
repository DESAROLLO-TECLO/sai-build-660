<html>
	<head>
		<meta charset="utf-8">
		<title>Consulta Archivo Origen</title>
	</head>
	<body>
		<section class="content-header">
			<h1>Consulta Archivo Origen</h1>
			<ol class="breadcrumb">
				<li><a><i class="fa fa-book"></i> Dispositivos Fijos</a></li>
				<li class="active">Consulta Archivo Origen</li>
			</ol>
		</section>
		<!-- Main content -->
		<section class="content">
			<form role="form" name="form" novalidate>
				<div class="row">
					<div class="col-md-2"></div>
					<div class="col-md-8 ">
						<div class="box box-danger">
							<div class="box-header with-border text-center">
								<h3 class="box-title">Búsqueda</h3>
							</div>
							<div class="box-body">
	
								<div class="row">
									<div class="col-xs-12">
										<div class="col-md-4">
											<label> Tipo de Búsqueda: </label>
										</div>
										<div class="col-md-6">
											<label class="radio-inline"><input type="radio"
												ng-model="opcion" value="1" ng-click="getVal()" checked>
												Todos</label> 
												<label class="radio-inline  pull-right"><input
												type="radio" ng-model="opcion" value="2" ng-click="getVal()">
												Avanzado</label>
	
										</div>
									</div>
								</div>
								<br>
								<br>
								
								<div class="row" ng-show="viewFilters">
									<div class="col-xs-12">
										<div class="col-md-3">
											<div class="form-group">
												<label for="fechaConsulta">Tipo de Fecha:</label>
												<div class="input-group date">
													<div class="input-group-addon">
														<i class="fa fa-calendar-check-o"></i>
													</div>
													<select class="form-control select2" name="fechaConsulta"
														id="fechaConsulta"
														ng-model="parametroBusqueda.periodoFecha"
														ng-disabled="disabledTipoFecha"
														ng-options='option.codigo as option.descripcion for option in filterPeriodoFecha'>
													</select>
												</div>
											</div>
										</div>
										<div class="col-md-3">
											<div class="form-group">
												<label for="checkTest1" class="labelCheck noneSelectedUser">
													Rango de fechas </label>
												<div class="input-group">
													<switcher class="swTeclo" id-check="switchRangoFecha"
														ng-model="switchRangoFecha"
														ng-change="activaRangoFecha(newValue, oldValue)"
														true-label="<i class='fa fa-check-circle'></i>"
														true-value="1"
														false-label="<i class='fa fa-times-circle'></i>"
														false-value="0"> </switcher>
												</div>
											</div>
										</div>
										<div class="col-md-3">
											<div class="form-group"
												ng-class="{'has-error':switchRangoFecha==1 && form.fInicio.$invalid && form.fInicio.$dirty}">
												<label for="fInicio">Fecha Inicio:</label>
												<div class="input-group">
													<div class="input-group-addon">
														<i class="fa fa-calendar"></i>
													</div>
													<input  class="form-control inputFecha" id="fInicio" size ="65"
														name="fInicio" readonly date-picker
														idioma-dp="{{currentLanguage}}"
														ng-disabled="disabledFechas"
														ng-model="parametroBusqueda.startDate" elemento="'fFin'"
														mindate="parametroBusqueda.startDate" />
												</div>
												<span
													ng-if="switchRangoFecha==1 && form.fInicio.$invalid && form.fInicio.$dirty"
													ng-style="{color:'red'}"> 
													La fecha de Inicio es requerida 
												</span>
											</div>
										</div>
										<div class="col-md-3">
											<div class="form-group" ng-class="{'has-error':switchRangoFecha==1 && form.fFin.$invalid && form.fFin.$dirty}">
												<label for="fFin">Fecha Fin:</label>
												<div class="input-group">
													<div class="input-group-addon">
														<i class="fa fa-calendar"></i>
													</div>
													<input class="form-control inputFecha" id="fFin" size="35"
													 name="fFin" readonly date-picker
	                                                   idioma-dp="{{currentLanguage}}"
														ng-disabled="disabledFechas"
														ng-model="parametroBusqueda.endDate" elemento="'fInicio'"
														maxdate="parametroBusqueda.endDate" />
												</div>
												<span ng-if="switchRangoFecha==1 && form.fFin.$invalid && form.fFin.$dirty" ng-style="{color:'red'}"> 
													La fecha de Fin es requerida 
												</span>
											</div>
										</div>
	
									</div>
	<!-- ----------------------------------------------------------------- -->
	
	
	
	
	
	
	<!-- 								<div class="col-md-2" style="width: 18.0000000%"> -->
	<!-- 									<div class="form-group"> -->
	<!-- 										<label for="checkTest1" class="labelCheck noneSelectedUser"> -->
	<!-- 											Rango de fechas </label> -->
	<!-- 										<div class="input-group"> -->
	<!-- 											<switcher class="swTeclo" id-check="switchRangoFecha" -->
	<!-- 												ng-model="switchRangoFecha" -->
	<!-- 												ng-change="activaRangoFecha(newValue, oldValue)" -->
	<!-- 												true-label="<i class='fa fa-check-circle'></i>" -->
	<!-- 												true-value="1" -->
	<!-- 												false-label="<i class='fa fa-times-circle'></i>" -->
	<!-- 												false-value="0"> </switcher> -->
	<!-- 										</div> -->
	<!-- 									</div> -->
	<!-- 								</div> -->
	
	
	<!-- 								<div class="col-md-4" style="width: 31.90000000%"> -->
	<!-- 									<div class="form-group" -->
	<!-- 										ng-class="{'has-error': switchRangoFecha == 1 && form.fInicio.$invalid && form.fInicio.$dirty}"> -->
	<!-- 										<label for="fInicio">Fecha Inicio:</label> -->
	<!-- 										<div class="input-group"> -->
	<!-- 											<div class="input-group-addon"> -->
	<!-- 												<i class="fa fa-calendar"></i> -->
	<!-- 											</div> -->
	<!-- 											<input class="form-control inputFecha" id="fInicio" size="65" -->
	<!-- 												name="fInicio" readonly date-picker -->
	<!-- 												idioma-dp="{{currentLanguage}}" ng-disabled="disabledFechas" -->
	<!-- 												ng-model="fechaVO.fInicio" elemento="'fFin'" -->
	<!-- 												mindate="fechaVO.fInicio" /> -->
	<!-- 										</div> -->
	<!-- 										<span -->
	<!-- 											ng-if="switchRangoFecha == 1 && form.fInicio.$invalid && form.fInicio.$dirty}" -->
	<!-- 											ng-style="{color:'red'}"> La fecha de Inicio es -->
	<!-- 											requerida </span> -->
	<!-- 									</div> -->
	
	<!-- 								</div> -->
	<!-- 								<div class="col-md-6" style="width: 50.000000000%"> -->
	<!-- 									<div class="form-group"> -->
	<!-- 										<label for="fFin">Fecha Fin:</label> -->
	<!-- 										<div class="input-group"> -->
	<!-- 											<div class="input-group-addon"> -->
	<!-- 												<i class="fa fa-calendar"></i> -->
	<!-- 											</div> -->
	<!-- 											<input class="form-control inputFecha" id="fFin" name="fFin" -->
	<!-- 												readonly size="35" date-picker -->
	<!-- 												idioma-dp="{{currentLanguage}}" ng-disabled="disabledFechas" -->
	<!-- 												ng-model="fechaVO.fFin" elemento="'fInicio'" -->
	<!-- 												maxdate="fechaVO.fFin" /> -->
	<!-- 										</div> -->
	<!-- 									</div> -->
	<!-- 								</div> -->
	
	
	
	<!-- ---------------------------------------------------------------------------- -->
	
	
	
	
	
	
									<div class="col-xs-12">
	
	
										<!-- lista con checlist -->
	
	
										<div class="col-md-6">
											<div class="form-group"
												ng-class="{'has-error': form.Eprocesados.$invalid && form.Eprocesados.$dirty}">
												<label for="Eprocesados">Estatus Proceso:</label>
												<div class="input-group">
													<div class="input-group-addon">
														<i class="fa fa-list-alt"></i>
													</div>
													<select class="form-control" select-picker multiple
														ng-required="true" name="Eprocesados" id="Eprocesados"
														data-actions-box="true"
														data-selected-text-format="count > 2" data-max-options="4"
														ng-model="parametroBusqueda.selectMultipleOp1"
														ng-options="sp.value as sp.label for sp in comboLlenarEstatus">
	
													</select>
	
													<!-- ng-options='option.id_Proc_Orig as option.nb_proc_Arch_Orig for option in option.comboLlenarEstatus'-->
	
	
												</div>
												<span
													ng-if="form.Eprocesados.$invalid && form.Eprocesados.$dirty"
													ng-style="{color:'red'}"> El estatus de proceso es
													requerido </span>
											</div>
										</div>
	
	
	
										<div class="col-md-6">
											<div class="form-group"
												ng-class="{'has-error': form.tipoArchivo.$invalid && form.tipoArchivo.$dirty}">
												<label for="tipoArchivo">Tipo de Archivo:</label>
												<div class="input-group">
													<div class="input-group-addon">
														<i class="fa fa-list-alt"></i>
													</div>
													<select class="form-control" select-picker multiple
														ng-required="true" name="tipoArchivo" id="tipoArchivo"
														data-actions-box="true"
														data-selected-text-format="count > 2" data-max-options="3"
														ng-model="parametroBusqueda.selectMultipleOp2"
														ng-options="tp.value as tp.label for tp in comboLlenarArchivo">
	
													</select>
	
													<!-- ng-options='option.id_Proc_Orig as option.nb_proc_Arch_Orig for option in option.comboLlenarEstatus'-->
	
	
												</div>
												<span
													ng-if="form.tipoArchivo.$invalid && form.tipoArchivo.$dirty"
													ng-style="{color:'red'}"> El tipo de archivo es
													requerido </span>
											</div>
										</div>
										<!-- lista con checlist  -->
										<!-- 										<div class="col-md-4"> -->
										<!-- 										<div class="form-group" ng-class="{'has-error': form.Eprocesados.$invalid && form.Eprocesados.$dirty}"> -->
										<!-- 											<label for="Eprocesados">Estatus Proceso:</label> -->
										<!-- 											<div class="input-group date"> -->
										<!-- 												<div class="input-group-addon"> -->
										<!-- 													<i class="fa fa-cog"></i> -->
										<!-- 												</div> -->
										<!-- 												<select  ng-required="true"  class="form-control select2" name="Eprocesados" id="Eprocesados" -->
										<!-- 													ng-model="option.estatusproceso"  -->
										<!-- 													ng-options='option.id_Proc_Orig as option.nb_proc_Arch_Orig for option in option.comboLlenarEstatus'> -->
	
										<!-- 												</select> -->
										<!-- 											</div> -->
										<!-- 											<span ng-show="form.Eprocesados.$error.required &&  form.Eprocesados.$dirty " -->
										<!-- 													ng-style="{color:'red'}">El Estatus Proceso es requerido</span> -->
										<!-- 										</div> -->
										<!-- 									</div> -->
										<!-- 									<div class="col-md-4"> -->
										<!-- 										<div class="form-group" ng-class="{'has-error': form.tipoArchivo.$invalid && form.tipoArchivo.$dirty}"> -->
										<!-- 											<label for="radar">Tipo de Archivo:</label> -->
										<!-- 											<div class="input-group date"> -->
										<!-- 												<div class="input-group-addon"> -->
										<!-- 													<i class="fa fa-tachometer"></i> -->
										<!-- 												</div> -->
										<!-- 												<select ng-required="true" class="form-control select2" name="tipoArchivo" id="tipoArchivo" -->
										<!-- 													ng-model="opcTipoArchivo.selectTipo"  ng-options="opcion.name for opcion in opcTipoArchivo.opcionesDisponibles track by opcion.id">  -->
										<!-- 												</select> -->
										<!-- 											</div> -->
										<!-- 											<span ng-show="form.tipoArchivo.$error.required &&  form.tipoArchivo.$dirty " -->
										<!-- 													ng-style="{color:'red'}">El Tipo de Archivo es requerido</span> -->
										<!-- 										</div> -->
										<!-- 									</div> -->
									</div>
								</div>
								<br>
								<div class="col-xs-12"></div>
								<div class="row" ng-show="viewByT">
									<div class="col-md-12 text-center">
										<button type="button" class="btn btn-danger"
											ng-click="consultaArchivo()">Buscar</button>
									</div>
								</div>
								<div class="row" ng-show="viewAll">
									<div class="col-md-12 text-center">
										<button type="button" class="btn btn-danger"
											ng-click="consultaArchivoOrigenTodo(1)">Buscar</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</form>
	
			<div class="row" ng-if="mostrarTabla">
				<div class="col-md-12">
					<div class="box box-danger">
						<div class="box-header ">
							<div class="col-md-6 col-xs-12">
								<h3 class="box-title">Registros Encontrados: {{ (archivoVO |
									filter:view.archivo).length }}</h3>
							</div>
	
							<div class="col-md-offset-2 col-md-3 col-xs-10">
								<div class="input-group pull-right">
									<input id="searchsomething" type="text" class="form-control"
										placeholder="Buscar por filtro" ng-model="view.archivo">
									<div class="input-group-addon">
										<i class="fa fa-search"></i>
									</div>
								</div>
							</div>
							<div ng-show="archivoVO.length > 0" class="col-md-1" align="right">
								<label>{{deteccion.id_archivo}}</label> <a
									ng-click="downloadReporteExcel()"> <span class="pull-right "><img
										src="static/dist/img/excel.png"></span>
								</a>
							</div>
						</div>
						<!-- /.box-header -->
						<div class="box-body table-responsive">
							<table id="tabla_archivo"
								class="table table-striped table-hover header-fixed">
								<thead>
									<tr>
										<th width="200px" sort order="'nb_Archivo'" by="order"
											reverse="reverse" class="text-center">NOMBRE ARCHIVO DE
											DETECCIONES</th>
	
										<th width="100px" sort order="'id_Tipo_Archivo'" by="order" reverse="reverse"
											class="text-center">TIPO ARCHIVO</th>
	
										<th width="100px" sort order="'porcentaje'" by="order" reverse="reverse"
											class="text-center">PORCENTAJE PROCESADO</th>
	
										<th width="115px" sort order="'st_Proceso'" by="order" reverse="reverse"
											class="text-center">ESTATUS</th>
	
	
										<th  width="100px" sort order="'cantidad_Reportado'" by="order" reverse="reverse"
											class="text-center">REPORTADO-CARGADO</th>
	
	
										<th  width="70px" sort order="'cantidad_Inactivo'" by="order" reverse="reverse"
											class="text-center">NO PROCESABLE</th>
	
	
										<th  width="80px" sort order="'cantidad_Procesado'" by="order" reverse="reverse"
											class="text-center">PROCESADO</th>
	
										<!-- 										<th sort order="'porcentaje'" by="order" reverse="reverse" -->
										<!-- 										class="text-center">PORCENTAJE PROCE.</th>	 -->
	
										<th width="115px" sort order="'fh_Ini_Carga'" by="order" reverse="reverse"
											class="text-center">FECHA DE RECEPCIÓN</th>
											
										<th  width="60px" sort order="'descargar'" by="order" reverse="reverse"
											class="text-center">ACCIÓN</th>
											
										<!-- 									<th sort order="" by="order" reverse="reverse" -->
										<!-- 										class="text-center">Eliminar</th> -->
									</tr>
								</thead>
								<tbody>
									<tr ng-if="(archivoVO | filter:view.archivo).length < 1">
										<td colspan="8" class="text-center"><h4>No se
												encontraron coincidencias</h4></td>
									</tr>
									<tr
										dir-paginate="archivo in archivoVO | orderBy:order:reverse |filter:view.archivo |  itemsPerPage: view.rowsPerPage">
										
										<td width="200px" class="text-center"><a
											ng-click="redirigir(archivo.id_Archivo,archivo.cantidad_Cargado)">{{archivo.nb_Archivo}}</a></td>
	
	                                    <td class="text-center" width="100px">
	                                    <span ng-if="archivo.id_Tipo_Archivo==null">Desconocido</span>
	                                    <span ng-if="archivo.id_Tipo_Archivo!=null">{{archivo.id_Tipo_Archivo}}</span>
	                                    
	                                    </td>
										
	
										<td class="text-center" width="100px">{{archivo.porcentaje}}%</td>
	
										<td width="115px" class="text-center">
										<span ng-if="archivo.st_Complementado == 0 && archivo.st_Proceso!='Cancelado'" class="label label-info center-block" >{{archivo.st_Proceso}}</span>
										<span ng-if="archivo.st_Complementado == 0 && archivo.st_Proceso=='Cancelado'" class="label label-danger center-block">{{archivo.st_Proceso}}</span>
										<span ng-if="archivo.st_Complementado == 1 && archivo.st_Proceso!='Cancelado'" class="label label-success center-block" >Complementado</span>
	
	                                  
	
										</td>
	
										<td class="text-center"  width="100px">
										<span ng-if="archivo.cantidad_Reportado != archivo.cantidad_Cargado" class="label label-warning center-block">
																{{archivo.cantidad_Reportado}}-{{archivo.cantidad_Cargado}}
															</span>
															
											<span ng-if="archivo.cantidad_Reportado == archivo.cantidad_Cargado" >
																{{archivo.cantidad_Reportado}}-{{archivo.cantidad_Cargado}}
															</span>				
															
															
															
												
												
												</td>
											<!--<td class="text-center">
	<!-- 										<p class="img-rounded" -->
	<!-- 											ng-style="{'background-color':archivo.cantidad_Reportado != archivo.cantidad_Cargado ?  ' #ff7e00': '#ffffff'}">{{archivo.cantidad_Cargado}}</p> 
										
									  <span ng-if="archivo.cantidad_Reportado != archivo.cantidad_Cargado" class="label label-warning center-block">
																{{archivo.cantidad_Cargado}}
															</span>
															
															<span ng-if="archivo.cantidad_Reportado == archivo.cantidad_Cargado" >
																{{archivo.cantidad_Cargado}}
															</span>
														
															
										</td>-->
										<td class="text-center"  width="70px">{{archivo.cantidad_Inactivo}}</td>
										<td class="text-center"  width="90px">{{archivo.cantidad_Procesado}}/{{archivo.cantidadProcesable}}</td>
										<!-- 									<td class="text-center">{{validarNum(((archivo.cantidad_Procesado+archivo.cantidad_Inactivo)*100)/archivo.cantidad_Reportado)}}%</td> -->
										<td class="text-center"  width="100px">{{ archivo.fh_Ini_Carga | date :
											'dd/MM/yyyy'}}</td>
	
	
	
										<td class="text-center"  width="80px"><a
											ng-if="archivo.cantidad_Cargado >0" class="img-rounded"
											title="Descarga Detecciones"
											ng-click="descargaArchivoOrigen(archivo.id_Archivo)"> <span><img
													width="25px" height="25px"
													src="static/dist/img/descarga_correctas.png"></span>
										</a> <a ng-if="archivo.cantidad_Procesado==0&&archivo.st_Proceso!='Cancelado'"
											ng-click="actualizaConfirm(archivo.id_Archivo)"
											class="img-rounded" title="Cancelar Archivo"> <span><img
													width="25px" height="25px"
													src="static/dist/img/cancelar_archivo.png"></span>
										</a> <!-- 									<a class="btn btn-danger" title="Cancelar" --> <!-- 									 ng-click="actualizaConfirm(archivo.id_Archivo)"> <i -->
											<!-- 									 class="fa fa-window-close" aria-hidden="true"></i> -->
											<!-- 									</a> --></td>
	
	
									</tr>
	
								</tbody>
							</table>
						</div>
	
						<div class="container-fluid">
							<div class="fixed-table-pagination" style="display: block;">
								<rows-per-page rows="view.rowsPerPage" filtro="view.archivo"
									array="archivoVO"></rows-per-page>
	
								<div class="pull-right pagination">
									<dir-pagination-controls class="pagination"></dir-pagination-controls>
								</div>
							</div>
						</div>
	
	
					</div>
					<!-- /.box -->
				</div>
			</div>
	
	
	
		</section>
	
	
	
	
		<script type="text/javascript" >
			$(function () { 
				$("#fInicio").datepicker({              
					format: 'dd/mm/yyyy', 
					language: 'es', 
					todayHighlight : true, 
					autoclose : true 
				}).on('changeDate', function (selected) { 
		        	var minDate = new Date(selected.date.valueOf()); 
		        	$('#fFin').datepicker('setStartDate', minDate); 
		    	}); 
					
				$("#fFin").datepicker({              
					format: 'dd/mm/yyyy', 
					language: 'es', 
					todayHighlight : true, 
					autoclose : true 
				}).on('changeDate', function (selected) { 
		        	var maxDate = new Date(selected.date.valueOf()); 
		        	$('#fInicio').datepicker('setEndDate', maxDate); 
		    	}); 
			}); 
	  </script>
<body>
</html>